# ArchInsight - AI-driven Project Insight & Workflow

건축 프로젝트 분석을 위한 AI 기반 워크플로우 시스템입니다. PDF 문서를 업로드하면 자동으로 건축 요구사항을 분석하고 구조화된 보고서를 생성하는 종합적인 솔루션입니다.

## 📖 주요 기능

### 📝 **프로젝트 관리**
- **프로젝트 정보 입력**: 프로젝트명, 건축주, 대지위치, 건물용도 등 기본 정보 입력
- **사용자 인증 시스템**: 관리자/사용자 권한 관리 및 세션 관리
- **PDF 문서 분석**: 업로드된 PDF 문서의 텍스트 추출 및 벡터 데이터베이스 저장

### 🧠 **AI 기반 분석**
- **DSPy 프레임워크**: Claude 모델을 활용한 고급 AI 분석
- **용도별 맞춤 분석**: 근린생활시설, 문화시설, 의료시설 등 12개 용도 분류
- **목적별 분석**: 계획안/컨셉, 상권/수익성, 법적/인허가 등 6개 목적 분류
- **워크플로우 관리**: 자동 제안된 분석 단계를 사용자가 커스터마이징

### 📚 **분석 단계**
1. **요구사항 분석**: 프로젝트 핵심 요구사항 정리
2. **AI 추론**: Chain-of-Thought 기반 논리적 분석
3. **사례 비교**: 유사 프로젝트 벤치마킹
4. **전략 제언**: 실행 가능한 전략적 제안
5. **최적화 조건**: 프로젝트 최적화 방안
6. **Narrative 생성**: 감성적 스토리텔링 기반 발표용 내용

### 📄 **결과 생성**
- **PDF 보고서**: 전문적인 분석 보고서 (한국어 폰트 지원)
- **Word 문서**: 편집 가능한 문서 형식
- **웹페이지**: 다크모드 인터랙티브 웹페이지
- **실시간 피드백**: 분석 결과에 대한 즉시 피드백 및 재분석

## 🛠️ 설치 및 실행

### 1. 환경 설정
```bash
# conda 환경 생성 및 활성화
conda create -n inni_env python=3.9
conda activate inni_env

# 의존성 설치
pip install -r requirements.txt
```

### 2. API 키 설정
```bash
# .env 파일 생성
ANTHROPIC_API_KEY=your_anthropic_api_key
SERP_API_KEY=your_serpapi_key
```

### 3. 애플리케이션 실행
```bash
# conda 환경 활성화 후 실행
conda activate inni_env
streamlit run app.py
```

## 📚 사용 방법

### 1. **로그인 및 프로젝트 설정**
- 관리자 계정으로 로그인 (기본: admin/admin123)
- 프로젝트 기본 정보 입력 및 PDF 문서 업로드

### 2. **분석 워크플로우 구성**
- 건축 용도 선택 (12개 카테고리)
- 분석 목적 선택 (6개 카테고리)
- 자동 제안된 분석 단계 검토 및 수정
- 커스텀 단계 추가/삭제

### 3. **AI 분석 실행**
- 단계별 순차적 분석 진행
- 실시간 진행 상황 모니터링
- 각 단계별 결과 확인 및 피드백

### 4. **결과 다운로드**
- PDF/Word 형식 보고서 생성
- 인터랙티브 웹페이지 생성
- 분석 데이터 내보내기

## 🏛️ 프로젝트 구조

| **파일명** | **크기** | **주요 기능** | **핵심 역할** |
|------------|----------|---------------|---------------|
| `app.py` | 16KB | 메인 애플리케이션 | Streamlit UI, 인증, PDF 업로드 |
| `workflow_ui.py` | 101KB | 워크플로우 UI | 분석 단계 관리, 사용자 인터페이스 |
| `analysis_system.py` | 40KB | 분석 시스템 핵심 | 용도/목적 분류, 단계 자동 제안 |
| `agent_executor.py` | 8.4KB | AI 에이전트 실행 | DSPy 기반 AI 분석 실행 |
| `report_generator.py` | 13KB | 보고서 생성 | PDF/Word 보고서 생성 |
| `webpage_generator.py` | 27KB | 웹페이지 생성 | 다크모드 인터랙티브 웹페이지 |
| `summary_generator.py` | 14KB | PDF 요약 생성 | PDF 텍스트 분석 및 요약 |
| `auth_system.py` | 6.4KB | 인증 시스템 | 사용자 로그인/관리 |
| `user_state.py` | 4.2KB | 사용자 상태 관리 | 세션 상태 관리 |
| `utils_pdf.py` | 6.9KB | PDF 처리 유틸리티 | PDF 텍스트 추출, 벡터 검색 |
| `init_dspy.py` | 6.9KB | DSPy 초기화 | Claude 모델 설정 |
| `dsl_to_prompt.py` | 11KB | DSL 변환 | DSL을 프롬프트로 변환 |
| `prompt_loader.py` | 4.2KB | 프롬프트 로더 | JSON 프롬프트 블록 로드 |
| `search_helper.py` | 2.4KB | 검색 도우미 | 웹 검색 API 연동 |

## 🛠️ 기술 스택

### **Frontend & UI**
- **Streamlit**: 웹 인터페이스 및 대시보드
- **CSS/HTML**: 커스텀 스타일링 및 반응형 디자인

### **AI & ML**
- **DSPy**: AI 프롬프트 관리 및 최적화
- **Anthropic Claude**: 고성능 AI 모델 (3.5 Sonnet, Haiku, Opus)
- **Chain-of-Thought**: 논리적 추론 기반 분석

### **데이터 처리**
- **PyMuPDF (fitz)**: PDF 텍스트 추출 및 처리
- **ChromaDB**: 벡터 데이터베이스 및 검색
- **SerpAPI**: 웹 검색 및 최신 정보 수집

### **문서 생성**
- **ReportLab**: PDF 보고서 생성 (한국어 폰트 지원)
- **python-docx**: Word 문서 생성
- **HTML/CSS**: 인터랙티브 웹페이지 생성

### **보안 & 인증**
- **bcrypt**: 비밀번호 해시화
- **JSON**: 사용자 데이터 관리

## 📚 분석 용도 분류

### **건축 용도 (12개)**
- 근린생활시설, 문화 및 집회시설, 판매시설(리테일)
- 운수시설, 의료시설, 교육연구시설
- 노유자시설, 수련시설, 운동시설
- 업무시설, 숙박시설, 기타시설

### **분석 목적 (6개)**
- 계획안/컨셉/디자인, 상권/수익성/투자
- 법적/인허가, 공간/동선/UX
- 운영/관리, 기타

---

**ArchInsight** - 건축 프로젝트의 인사이트를 AI로 발견하세요 🏗️✨